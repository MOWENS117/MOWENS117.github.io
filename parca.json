
{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  
  "title": {
    "text": "Statewide, All Grades, % Proficient",
    "subtitle": "Alabama Comprehensive Assessment Program",
    "subtitleFontStyle": "italic",
    "subtitleFontSize": 10,
    "anchor": "start",
    "color": "black"
  },
  
  "data": {
    "values": [
      {"Year": "2021", "Subject": "Science", "Percentage": 36.5},
      {"Year": "2022", "Subject": "Science", "Percentage": 39.8},
      {"Year": "2023", "Subject": "Science", "Percentage": 41.0},
      {"Year": "2024", "Subject": "Science", "Percentage": 41.1},
      {"Year": "2021", "Subject": "ELA", "Percentage": 47.8},
      {"Year": "2022", "Subject": "ELA", "Percentage": 49.6},
      {"Year": "2023", "Subject": "ELA", "Percentage": 51.9},
      {"Year": "2024", "Subject": "ELA", "Percentage": 56.0},
      {"Year": "2021", "Subject": "Math", "Percentage": 21.8},
      {"Year": "2022", "Subject": "Math", "Percentage": 27.8},
      {"Year": "2023", "Subject": "Math", "Percentage": 30.8},
      {"Year": "2024", "Subject": "Math", "Percentage": 32.4}
    ]
  },
  
  "facet": {
    "field": "Subject", // Facet by the 'Subject' field to create separate panels for each subject
    "type": "nominal", // The type of the facet field is nominal (categorical)
    "columns": 1, // Display the facets in a single column
    "sort": ["Math", "ELA", "Science"], // Arrange the order of the subjects
    "header": {
      "title": null // Do not display a title for the header
    }
  },
  
  "spec": {
    "width": 200, // Set the width for each faceted chart
    "height": 300, // Set the height for each faceted chart
    "layer": [
      {
        "mark": {
          "type": "bar", // Define the type of mark as a bar
          "size": 25 // Set the size of the bars for visual clarity
        },
        "encoding": {
          "x": {
            "field": "Year", // X-axis shows the 'Year' field
            "type": "nominal", // The type of the x-axis field is nominal (categorical)
            "axis": {
              "labelPadding": 10, // Set padding for labels to improve spacing
              "labelFontSize": 14, // Set font size for the x-axis labels
              "labelFontWeight": "bold", // Make x-axis labels bold
              "title": null, // No title for the x-axis
              "grid": false, // Do not display grid lines for the x-axis
              "ticks": false, // Hide ticks on the x-axis
              "labelAngle": 0 // Keep the labels horizontal for better readability
            }
          },
          "y": {
            "field": "Percentage", // Y-axis shows the 'Percentage' field
            "type": "quantitative", // The type of the y-axis field is quantitative (numerical)
            "scale": { "domain": [0, 100] }, // Set the y-axis scale from 0 to 100
            "title": "% Proficient", // Title for the y-axis
            "axis": {
              "labelPadding": 10, // Set padding for labels to improve spacing
              "labelFontSize": 14, // Set font size for the y-axis labels
              "labelFontWeight": "bold", // Make y-axis labels bold
              "grid": true // Display grid lines for better data comparison
            }
          },
          "color": {
            "field": "Year", // Use the 'Year' field to determine the color of the bars
            "type": "nominal", // The type of the color field is nominal (categorical)
            "scale": {
              "domain": ["2021", "2022", "2023", "2024"], // Define the color domain based on years
              "range": ["#4E79A7", "#E15759", "#4daf4a", "#F28E2B"] // Set color values for each year
            },
            "legend": null // Remove the legend to declutter the visualization
          }
        }
      },
      {
        "mark": {
          "type": "text", // Add text to display the value at the top of each bar
          "align": "center", // Center-align the text above each bar
          "baseline": "bottom", // Set the baseline to bottom to position the text properly
          "dy": -5, // Adjust vertical position slightly above the bar
          "fontSize": 12 // Set font size for the text labels
        },
        "encoding": {
          "x": {
            "field": "Year", // Text is positioned based on the 'Year' field on the x-axis
            "type": "nominal"
          },
          "y": {
            "field": "Percentage", // Text is positioned based on the 'Percentage' field on the y-axis
            "type": "quantitative"
          },
          "text": {
            "field": "Percentage", // The text label shows the percentage value
            "type": "quantitative"
          },
          "color": {
            "value": "black" // Set the color of the text labels to black for visibility
          }
        }
      }
    ]
  }
}